"use strict";(globalThis.webpackChunkwspr_beakon_docs=globalThis.webpackChunkwspr_beakon_docs||[]).push([[7829],{5604:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"software-configuration","title":"Software Flashing & Config","description":"This section covers the firmware installation and parameter configuration for your WSPR Beakon system.","source":"@site/docs/software-configuration.md","sourceDirName":".","slug":"/software-configuration","permalink":"/wspr-beakon-docs/docs/software-configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/wspr-beacon/wspr-beacon-docs/tree/main/docs/software-configuration.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"wspr_beacon","previous":{"title":"Filters","permalink":"/wspr-beakon-docs/docs/filters"},"next":{"title":"LCD Display and Encoder Usage","permalink":"/wspr-beakon-docs/docs/lcd-encoder-usage"}}');var o=i(4848),s=i(8453);const a={sidebar_position:5},l="Software Flashing & Config",t={},d=[{value:"Software Installation",id:"software-installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Arduino IDE Configuration",id:"arduino-ide-configuration",level:3},{value:"Library Installation",id:"library-installation",level:3},{value:"Firmware Upload",id:"firmware-upload",level:3},{value:"Software Configuration",id:"software-configuration",level:2},{value:"Development Mode Configuration",id:"development-mode-configuration",level:3},{value:"Basic WSPR Configuration",id:"basic-wspr-configuration",level:3},{value:"Si5351 Power Level",id:"si5351-power-level",level:3},{value:"WiFi Networks Configuration",id:"wifi-networks-configuration",level:3},{value:"Band Configuration",id:"band-configuration",level:3},{value:"Relay Pin Assignment",id:"relay-pin-assignment",level:3}];function c(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"software-flashing--config",children:"Software Flashing & Config"})}),"\n",(0,o.jsx)(e.p,{children:"This section covers the firmware installation and parameter configuration for your WSPR Beakon system."}),"\n",(0,o.jsxs)(e.admonition,{title:"Source Code Repository",type:"info",children:[(0,o.jsx)(e.p,{children:"The complete source code, libraries, and documentation for the WSPR Beakon project are available at:"}),(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon",children:"https://github.com/danielcharrua/wspr-beakon"})})}),(0,o.jsx)(e.p,{children:"Make sure to download or clone the repository to access all necessary files before proceeding with the installation."})]}),"\n",(0,o.jsx)(e.h2,{id:"software-installation",children:"Software Installation"}),"\n",(0,o.jsx)(e.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["Arduino IDE: Download and install from ",(0,o.jsx)(e.a,{href:"https://www.arduino.cc/en/software",children:"arduino.cc"})]}),"\n",(0,o.jsx)(e.li,{children:"ESP32 Package: Install ESP32 support in Arduino IDE"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"arduino-ide-configuration",children:"Arduino IDE Configuration"}),"\n",(0,o.jsx)(e.p,{children:"Configure Arduino IDE with the following settings:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Board: ESP32 Dev Module"}),"\n",(0,o.jsx)(e.li,{children:"Upload Speed: 921600"}),"\n",(0,o.jsx)(e.li,{children:"CPU Frequency: 240MHz (WiFi/BT)"}),"\n",(0,o.jsx)(e.li,{children:"Flash Frequency: 80MHz"}),"\n",(0,o.jsx)(e.li,{children:"Flash Mode: QIO"}),"\n",(0,o.jsx)(e.li,{children:"Flash Size: 4MB (32Mb)"}),"\n",(0,o.jsx)(e.li,{children:"Partition Scheme: Default 4MB with spiffs"}),"\n",(0,o.jsx)(e.li,{children:"Core Debug Level: None"}),"\n",(0,o.jsx)(e.li,{children:"PSRAM: Disabled"}),"\n",(0,o.jsx)(e.li,{children:"Programmer: Esptool"}),"\n"]}),"\n",(0,o.jsx)("div",{style:{textAlign:"center",marginBottom:"20px"},children:(0,o.jsx)("img",{src:"/img/wspr-beakon-arduino-esp32-devkit-c-v4-config.png",alt:"Arduino ESP32 Configuration",style:{maxWidth:"600px",width:"100%"}})}),"\n",(0,o.jsx)(e.h3,{id:"library-installation",children:"Library Installation"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["Download all library ZIP files from the ",(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon/tree/main/lib",children:"GitHub repository lib/ folder"})]}),"\n",(0,o.jsxs)(e.li,{children:["Copy the extracted folders to your Arduino libraries directory:","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["Windows: ",(0,o.jsx)(e.code,{children:"Documents\\Arduino\\libraries\\"})]}),"\n",(0,o.jsxs)(e.li,{children:["macOS: ",(0,o.jsx)(e.code,{children:"~/Documents/Arduino/libraries/"})]}),"\n",(0,o.jsxs)(e.li,{children:["Linux: ",(0,o.jsx)(e.code,{children:"~/Arduino/libraries/"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Required libraries:"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon/raw/main/lib/Etherkit_Si5351-2.1.4.zip",children:"Etherkit Si5351 (v2.1.4)"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon/raw/main/lib/JTEncode-1.2.0.zip",children:"JTEncode (v1.2.0)"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon/raw/main/lib/LiquidCrystal_I2C-1.1.4.zip",children:"LiquidCrystal I2C (v1.1.4)"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon/raw/main/lib/NTPClient-3.1.0.zip",children:"NTPClient (v3.1.0)"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon/raw/main/lib/RotaryEncoder-1.5.2.zip",children:"RotaryEncoder (v1.5.2)"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon/raw/main/lib/Time-1.5.zip",children:"Time (v1.5)"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/danielcharrua/wspr-beakon/raw/main/lib/TinyGPSPlus-1.1.0.zip",children:"TinyGPSPlus (v1.1.0)"})}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"firmware-upload",children:"Firmware Upload"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Connect your ESP32 to your computer via USB cable"}),"\n",(0,o.jsxs)(e.li,{children:["Open ",(0,o.jsx)(e.code,{children:"wspr-beakon.ino"})," in Arduino IDE"]}),"\n",(0,o.jsx)(e.li,{children:"Configure the required parameters (see Configuration section below)"}),"\n",(0,o.jsx)(e.li,{children:"Select the correct COM port in Arduino IDE"}),"\n",(0,o.jsx)(e.li,{children:'Click "Upload" to flash the firmware'}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"software-configuration",children:"Software Configuration"}),"\n",(0,o.jsxs)(e.p,{children:["Before uploading the firmware, you must modify the configuration variables in the ",(0,o.jsx)(e.code,{children:"USER CONFIGURATION"})," section of the code according to your chosen configuration:"]}),"\n",(0,o.jsx)(e.h3,{id:"development-mode-configuration",children:"Development Mode Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-cpp",children:"#define DEVMODE // Serial port debug\n"})}),"\n",(0,o.jsx)(e.admonition,{title:"Development Mode",type:"warning",children:(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Development"}),": Keep ",(0,o.jsx)(e.code,{children:"#define DEVMODE"})," uncommented for debugging and troubleshooting"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Production"}),": Comment out this line (",(0,o.jsx)(e.code,{children:"// #define DEVMODE"}),") for optimal performance in final deployment"]}),"\n"]})}),"\n",(0,o.jsx)(e.h3,{id:"basic-wspr-configuration",children:"Basic WSPR Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-cpp",children:'// WSPR transmitter configuration\n#define WSPR_CALL "EA1REX"  // Your 4-6 character callsign\n#define WSPR_LOC "IN53"     // Your 4-character grid locator\n#define WSPR_DBM 20         // Power level shown in WSPR frame (0, 3, 7, 10 dBm)\n#define WSPR_TX_EVERY 4     // Transmit every X minutes (2, 4, 6, 8, 10, etc.)\n'})}),"\n",(0,o.jsx)(e.h3,{id:"si5351-power-level",children:"Si5351 Power Level"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-cpp",children:"// Available options: SI5351_DRIVE_2MA, SI5351_DRIVE_4MA, SI5351_DRIVE_6MA, SI5351_DRIVE_8MA\n// Power output (tested values): 2mA = 1mW, 4mA = 2mW, 6mA = 5mW, 8mA = 10mW\n#define SI5351_DRIVE_LEVEL SI5351_DRIVE_4MA\n"})}),"\n",(0,o.jsx)(e.h3,{id:"wifi-networks-configuration",children:"WiFi Networks Configuration"}),"\n",(0,o.jsxs)(e.p,{children:["For ",(0,o.jsx)(e.strong,{children:"base configuration"})," (NTP synchronization):"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-cpp",children:'const WiFiNetwork wifiNetworks[] = {\n  {"Your_SSID_1", "password1"},\n  {"Your_SSID_2", "password2"},\n  {"Your_SSID_3", "password3"}\n};\n'})}),"\n",(0,o.jsx)(e.h3,{id:"band-configuration",children:"Band Configuration"}),"\n",(0,o.jsx)(e.p,{children:"Configure frequencies, crystal calibration, and relay pins for each band:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-cpp",children:'} wsprFrequencies[] = {\n  // Frequency(Hz), Crystal_Freq(Hz), Label, Relay_Pin\n  {144489000UL, 25000000UL, "144.489 MHz 2m",  0},    // 2m band (not supported by the Si5351)\n  {70105048UL,  25000000UL, "70.091 MHz 4m",   0},    // 4m band (not supported by the Si5351)\n  {50303500UL,  25000000UL, "50.293 MHz 6m",   0},    // 6m band (not supported by the Si5351)\n  {28131120UL,  25000000UL, "28.124 MHz 10m",  12},   // 10m band\n  {24924600UL,  25000000UL, "24.924 MHz 12m",  12},   // 12m band\n  {21099330UL,  25000000UL, "21.094 MHz 15m",  14},   // 15m band\n  {18104600UL,  25000000UL, "18.104 MHz 17m",  14},   // 17m band\n  {14099615UL,  25000000UL, "14.095 MHz 20m",  27},   // 20m band\n  {10142033UL,  25000000UL, "10.138 MHz 30m",  27},   // 30m band\n  {7041356UL,   25000000UL, "7.038 MHz 40m",   26},   // 40m band\n  {5287200UL,   25000000UL, "5.287 MHz 60m",   26},   // 60m band\n  {3570732UL,   25000000UL, "3.568 MHz 80m",   25},   // 80m band\n  {1838426UL,   25000000UL, "1.836 MHz 160m",  33},   // 160m band\n  {475786UL,    25000000UL, "0.474 MHz 630m",  32},   // 630m band\n  {136000UL,    25000000UL, "0.136 MHz 2200m", 32}    // 2200m band\n};\n'})}),"\n",(0,o.jsx)(e.h3,{id:"relay-pin-assignment",children:"Relay Pin Assignment"}),"\n",(0,o.jsx)(e.p,{children:"The following ESP32 pins are used for band relay control:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Pin 12"}),": 10m, 12m bands"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Pin 14"}),": 15m, 17m bands"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Pin 25"}),": 80m band"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Pin 26"}),": 40m, 60m bands"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Pin 27"}),": 20m, 30m bands"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Pin 32"}),": 630m, 2200m bands"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Pin 33"}),": 160m band"]}),"\n"]}),"\n",(0,o.jsx)(e.admonition,{title:"Important Configuration Notes",type:"warning",children:(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Initial Crystal Frequency"}),": For the first upload, set all crystal frequencies to ",(0,o.jsx)(e.code,{children:"25000000UL"})," (25 MHz)"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Calibration Required"}),": After initial upload, you'll need to calibrate each band for frequency accuracy"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Custom Frequencies"}),": The provided frequencies are examples - you must calculate your own based on your specific Si5351 crystal"]}),"\n"]})}),"\n",(0,o.jsx)(e.admonition,{title:"Critical Post-Upload Step",type:"danger",children:(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Very Important"}),": Once new code is uploaded to the ESP32, it is necessary to make a band selection using the encoder (see next section) for the microcontroller to initialize correctly. Otherwise, the assembly operation will be erratic."]})})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>l});var r=i(6540);const o={},s=r.createContext(o);function a(n){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);